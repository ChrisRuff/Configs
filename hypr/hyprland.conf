#####################################################################################
# AUTOGENERATED HYPR CONFIG.
# PLEASE USE THE CONFIG PROVIDED IN THE GIT REPO /examples/hypr.conf AND EDIT IT,
# OR EDIT THIS ONE ACCORDING TO THE WIKI INSTRUCTIONS.
# #######################################################################################

autogenerated = 0 # remove this line to remove the warning

exec-once = hyprpm reload -n

# Load catppuccin
source=~/.config/hypr/themes/mocha.conf

general { 
    gaps_in = 2
    gaps_out = 2

    border_size = 1

    # https://wiki.hyprland.org/Configuring/Variables/#variable-types for info about colors
    col.active_border = rgba($skyAlphaee) rgba($sapphireAlphaee) 45deg
    col.inactive_border = rgba($surface1Alphaaa)

    # Set to true enable resizing windows by clicking and dragging on borders and gaps
    resize_on_border = false 

    # Please see https://wiki.hyprland.org/Configuring/Tearing/ before you turn this on
    allow_tearing = true

    layout = hy3
}
render {
    #explicit_sync = 2
    #explicit_sync_kms = 0
}

opengl {
    #nvidia_anti_flicker = 0
}

cursor { 
    no_hardware_cursors = true
}

# https://wiki.hyprland.org/Configuring/Variables/#decoration
decoration {
    rounding = 5

    # Change transparency of focused and unfocused windows
    active_opacity = 0.95
    inactive_opacity = 0.95

    # https://wiki.hyprland.org/Configuring/Variables/#blur
    blur {
        enabled = true
        size = 3
        passes = 1
        
        vibrancy = 0.1696
    }
}

# https://wiki.hyprland.org/Configuring/Variables/#animations
animations {
    enabled = true

    # Default animations, see https://wiki.hyprland.org/Configuring/Animations/ for more

    bezier = myBezier, 0.05, 0.9, 0.1, 1.05

    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = borderangle, 1, 8, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}

# https://wiki.hyprland.org/Configuring/Variables/#misc
misc { 
    force_default_wallpaper = -1 # Set to 0 or 1 to disable the anime mascot wallpapers
    disable_hyprland_logo = false # If true disables the random hyprland logo / anime girl background. :(

    enable_swallow = false
    swallow_regex = ^(kitty)$
    #vfr = 0
}

# https://wiki.hyprland.org/Configuring/Variables/#gestures
gestures {
    workspace_swipe = false
}

debug {
    #damage_tracking = 1
    disable_logs = false
}


#############
### INPUT ###
#############

# https://wiki.hyprland.org/Configuring/Variables/#input
input {
    kb_layout = us
    kb_variant = colemak_dh
    kb_model =
    kb_rules =
    kb_options = caps:swapescape
    repeat_delay = 190
    repeat_rate = 35

    follow_mouse = 1

    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
    scroll_factor = 0.5

    touchpad {
        natural_scroll = false
    }
}

# Example per-device config
# See https://wiki.hyprland.org/Configuring/Keywords/#per-device-input-configs for more
#device {
#    name = logitech-g502-1
#    sensitivity = -0.5
#}

# This is an example Hyprland config file.
# Refer to the wiki for more information.
# https://wiki.hyprland.org/Configuring/Configuring-Hyprland/

# Please note not all available settings / options are set here.
# For a full list, see the wiki

# You can split this configuration into multiple files
# Create your files separately and then link them to this file like this:
# source = ~/.config/hypr/myColors.conf


################
### MONITORS ###
################

$screen1 = DP-1
$screen2 = HDMI-A-1
$screen3 = HDMI-A-2

# See https://wiki.hyprland.org/Configuring/Monitors/
monitor=$screen1, 1680x1050, 0x0, 1, transform, 3
monitor=$screen2, 1920x1080, 1050x250, 1 
monitor=$screen3, 1920x1080, 2970x500, 1

#############################
### ENVIRONMENT VARIABLES ###
#############################

# See https://wiki.hyprland.org/Configuring/Environment-variables/
env = HYPRLAND_TRACE=1
env = AQ_TRACE=1

# Nvidia stuff
env = NVD_BACKEND,direct
env = GBM_BACKEND,nvidia-drm
env = LIBVA_DRIVER_NAME,nvidia
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = __NV_PRIME_RENDER_OFFLOAD,1
env = __GL_GSYNC_ALLOWED,0
env = __GL_VBR_ALLOWED,0
env = __GL_VRR_ALLOWED,0
env = LIBSEAT_BACKEND,logind

# Lib overrides
env = GDK_BACKEND,wayland,x11,*                # GTK
env = ELECTRON_OZONE_PLATFORM_HINT,auto  # Electron
env = CLUTTER_BACKEND,wayland            # Clutter
env = SDL_VIDEODRIVER,wayland      # SDL2
env = SDL_VIDEO_DRIVER,wayland     # SDL2
env = XDG_CURRENT_DESKTOP,Hyprland       # GLFW
env = XDG_SESSION_DESKTOP,Hyprland       # GLFW
env = XDG_SESSION_TYPE,wayland           # GLFW
env = MOZ_ENABLE_WAYLAND,1               # Firefox
env = MOZ_USE_XINPUT2,1                  # Firefox
env = QT_QPA_PLATFORM,wayland;xcb      # Qt
env = QT_SCREEN_SCALE_FACTORS="1;1"

# General purpose environment settings
env = CMAKE_GENERATOR,Ninja
#env = CC,/usr/bin/gcc-13
#env = CXX,/usr/bin/g++-13
env = CONAN_HOME,/home/chris/M85/.conan
######################################

#env = bitdepth,10                        # Streaming for discord

# Themes
env = GTK_THEME,Yaru-dark

env = XCURSOR_THEME,theme_phinger-cursors-dark
env = XCURSOR_SIZE,20
env = HYPRCURSOR_THEME,theme_phinger-cursors-dark
env = HYPRCURSOR_SIZE,20

####################
### KEYBINDINGSS ###
####################

# See https://wiki.hyprland.org/Configuring/Keywords/
$mainMod = SUPER # Sets "Windows" key as main modifier

bind = $mainMod CTRL, 59, movecurrentworkspacetomonitor, l # <
bind = $mainMod CTRL, 60, movecurrentworkspacetomonitor, r # >

bind = ,XF86AudioPrev, exec, playerctl --player=Feishin previous && pkill -RTMIN+4 waybar
bind = ,XF86AudioPlay, exec, playerctl --player=Feishin play-pause
bind = ,XF86AudioPause, exec, playerctl --player=Feishin play-pause
bind = ,XF86AudioNext, exec, playerctl --player=Feishin next && pkill -RTMIN+4 waybar

bind = MOD5, XF86AudioPrev, exec, playerctl --player=firefox previous
bind = MOD5, XF86AudioPlay, exec, playerctl --player=firefox play-pause
bind = MOD5, XF86AudioPause, exec, playerctl --player=firefox play-pause
bind = MOD5, XF86AudioNext, exec, playerctl --player=firefox next

binde = ,xF86AudioRaiseVolume, exec, playerctl --player=Feishin volume 0.01+
binde = ,xF86AudioLowerVolume, exec, playerctl --player=Feishin volume 0.01-
bind = ,xF86AudioMute, exec, amixer -q set Master toggle
bind = $mainMod, Print, exec, grim -g "$(slurp -d)" - | wl-copy
#bind = $mainMod, Print, exec, XDG_SESSION_DESKTOP=sway XDG_CURRENT_DESKTOP=sway flameshot gui

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow
bindr = $mainMod, mouse:275, hy3:movefocus, r
bindr = $mainMod, mouse:276, hy3:movefocus, l

# Move focus with mainMod + arrow keys
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, hy3:movefocus, u
bind = $mainMod, down, hy3:movefocus, d

bind = $mainMod, n, hy3:movefocus, l
bind = $mainMod, e, hy3:movefocus, d
bind = $mainMod, i, hy3:movefocus, u
bind = $mainMod, o, hy3:movefocus, r

bind = $mainMod SHIFT, n, hy3:movewindow, l
bind = $mainMod SHIFT, e, hy3:movewindow, d
bind = $mainMod SHIFT, i, hy3:movewindow, u
bind = $mainMod SHIFT, o, hy3:movewindow, r

# Bound programs
$terminal_client = kitty
$terminal = $terminal_client -d $(cat /tmp/whereami)
$fileManager = $terminal -e "yazi"
$menu = wofi --show run


bind = $mainMod SHIFT CTRL, SPACE, exec, hyprctl dispatch dpms off
bind = $mainMod SHIFT, SPACE, exec, hyprctl dispatch dpms on
bind = $mainMod, RETURN, exec, $terminal
bind = $mainMod, x, exec, $terminal
bind = $mainMod SHIFT, RETURN, exec, $terminal_client
bind = $mainMod CTRL, RETURN, exec, /usr/bin/konsole
bind = $mainMod, F2, submap, browsermode
submap = browsermode
bind = , 1, exec, source ~/.config/hypr/ff.sh; searcher
bind = , 1, submap, reset
bind = , 2, exec, source ~/.config/hypr/ff.sh; watcher
bind = , 2, submap, reset
bind = , 3, exec, source ~/.config/hypr/ff.sh; homelab
bind = , 3, submap, reset
bind = , 4, exec, source ~/.config/hypr/ff.sh; start
bind = , 4, submap, reset
bind = , escape, submap, reset
submap = reset

bind = $mainMod, F3, exec, $fileManager
bind = $mainMod, d, exec, $menu

bind = $mainMod, s, hy3:changegroup, toggletab
bind = $mainMod, h, hy3:makegroup, h
bind = $mainMod, v, hy3:makegroup, v

bind = $mainMod SHIFT, q, killactive
bind = $mainMod, SPACE, togglefloating,
bind = $mainMod, f, fullscreen

bind = $mainMod, r, submap, resizemode
submap = resizemode
binde = , n, resizeactive, 50 0
binde = , e, resizeactive, 0 50
binde = , i, resizeactive, 0 -50
binde = , o, resizeactive, -50 0

binde = , left, resizeactive, 50 0
binde = , up, resizeactive, 0 50
binde = , down, resizeactive, 0 -50
binde = , right, resizeactive, -50 0
bind = , escape, submap, reset
submap = reset


bind = $mainMod, 0, submap, shutdown
submap = shutdown
bind = SHIFT, s, exec, shutdown -h now
bind = , r, exec, reboot
bind = , k, exit

bind = , s, submap, reset
bind = , escape, submap, reset
submap = reset


##############################
### WORKSPACES AND WINDOWS ###
##############################

# See https://wiki.hyprland.org/Configuring/Workspace-Rules/ for workspace rules
#workspace=name:monitoring, monitor:$screen1, persistent:true
#workspace=name:coding, monitor:$screen2, default:true, persistent:true
#workspace=name:firefox, monitor:$screen3, default:true, persistent:true
#workspace=name:filebrowser, monitor:$screen2, persistent:true
#workspace=name:remoting, monitor:$screen2, persistent:true
#workspace=name:searching, monitor:$screen1, persistent:true
#workspace=name:homelab, monitor:$screen2, persistent:true
#workspace=name:discord, monitor:$screen1, default:true, persistent:true
#workspace=name:music, monitor:$screen3, persistent:true

$ws_monitoring=1
$ws_code=2
$ws_browser=3
$ws_file=4
$ws_remoting=5
$ws_searcher=7
$ws_homelab=8
$ws_discord=9
$ws_music=10
$ws_git=11
$ws_steam=12
$ws_obsidian=13
$ws_email=14
$ws_ai=15
$ws_config=16
$ws_gamedev=17

# Switch workspaces with mainMod + [0-9]
bind = $mainMod, 1, workspace, $ws_monitoring
bind = $mainMod, 2, workspace, $ws_code
bind = $mainMod, 3, workspace, $ws_browser
bind = $mainMod, 4, workspace, $ws_file
bind = $mainMod, 5, workspace, $ws_remoting
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, $ws_searcher
bind = $mainMod, 8, workspace, $ws_homelab
bind = $mainMod, 9, workspace, $ws_discord

# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspace, $ws_monitoring
bind = $mainMod SHIFT, 2, movetoworkspace, $ws_code
bind = $mainMod SHIFT, 3, movetoworkspace, $ws_browser
bind = $mainMod SHIFT, 4, movetoworkspace, $ws_file
bind = $mainMod SHIFT, 5, movetoworkspace, $ws_remoting
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, $ws_searcher
bind = $mainMod SHIFT, 8, movetoworkspace, $ws_homelab
bind = $mainMod SHIFT, 9, movetoworkspace, $ws_discord

bind = $mainMod CTRL, 1, movetoworkspacesilent, $ws_monitoring
bind = $mainMod CTRL, 2, movetoworkspacesilent, $ws_code
bind = $mainMod CTRL, 3, movetoworkspacesilent, $ws_browser
bind = $mainMod CTRL, 4, movetoworkspacesilent, $ws_file
bind = $mainMod CTRL, 5, movetoworkspacesilent, $ws_remoting
bind = $mainMod CTRL, 6, movetoworkspacesilent, 6
bind = $mainMod CTRL, 7, movetoworkspacesilent, $ws_searcher
bind = $mainMod CTRL, 8, movetoworkspacesilent, $ws_homelab
bind = $mainMod CTRL, 9, movetoworkspacesilent, $ws_discord

# Scratchpad 
#bind = $mainMod, 0, togglespecialworkspace, magic
#bind = $mainMod SHIFT, 0, movetoworkspace, special:magic

bind = $mainMod, comma, submap, layout
submap = layout

bind = , 1, workspace, $ws_music
bind = , 1, submap, reset
bind = , 2, workspace, $ws_git
bind = , 2, submap, reset
bind = , 3, workspace, $ws_steam
bind = , 3, submap, reset
bind = , 4, workspace, $ws_ai
bind = , 4, submap, reset
bind = , o, workspace, $ws_obsidian
bind = , o, submap, reset
bind = , e, workspace, $ws_email
bind = , e, submap, reset
bind = , c, workspace, $ws_config
bind = , c, submap, reset
bind = , g, workspace, $ws_gamedev
bind = , g, submap, reset

bind = SHIFT, 1, movetoworkspace, $ws_music
bind = SHIFT, 1, submap, reset
bind = SHIFT, 2, movetoworkspace, $ws_git
bind = SHIFT, 2, submap, reset
bind = SHIFT, 3, movetoworkspace, $ws_steam
bind = SHIFT, 3, submap, reset
bind = SHIFT, 4, movetoworkspace, $ws_ai
bind = SHIFT, 4, submap, reset
bind = SHIFT, o, movetoworkspace, $ws_obsidian
bind = SHIFT, o, submap, reset
bind = SHIFT, e, movetoworkspace, $ws_email
bind = SHIFT, e, submap, reset
bind = SHIFT, c, movetoworkspace, $ws_config
bind = SHIFT, c, submap, reset
bind = SHIFT, g, movetoworkspace, $ws_gamedev
bind = SHIFT, g, submap, reset

bind = CTRL, 1, movetoworkspacesilent, $ws_music
bind = CTRL, 1, submap, reset                    
bind = CTRL, 2, movetoworkspacesilent, $ws_git
bind = CTRL, 2, submap, reset                    
bind = CTRL, 3, movetoworkspacesilent, $ws_steam
bind = CTRL, 3, submap, reset                    
bind = CTRL, 4, movetoworkspacesilent, $ws_ai
bind = CTRL, 4, submap, reset                    
bind = CTRL, o, movetoworkspacesilent, $ws_obsidian
bind = CTRL, o, submap, reset                    
bind = CTRL, e, movetoworkspacesilent, $ws_email
bind = CTRL, e, submap, reset
bind = CTRL, c, movetoworkspacesilent, $ws_config
bind = CTRL, c, submap, reset
bind = CTRL, g, movetoworkspacesilent, $ws_gamedev
bind = CTRL, g, submap, reset
bind = ,escape,submap,reset

submap = reset


workspace=$ws_monitoring, monitor:$screen1, persistent:true
workspace=$ws_code, monitor:$screen2, persistent:true
workspace=$ws_browser, monitor:$screen3, default:true, persistent:true
workspace=$ws_file, monitor:$screen2, persistent:true
workspace=$ws_remoting, monitor:$screen2, persistent:true
workspace=5, monitor:$screen2
workspace=6, monitor:$screen2, persistent:true
workspace=$ws_searcher, monitor:$screen1, persistent:true
workspace=$ws_homelab, monitor:$screen2, persistent:true
workspace=$ws_discord, monitor:$screen1, persistent:true
workspace=$ws_music, monitor:$screen3, persistent:true
workspace=$ws_git, monitor:$screen2, persistent:true
workspace=$ws_steam, monitor:$screen2, persistent:true
workspace=$ws_obsidian, monitor:$screen2, persistent:true
workspace=$ws_email, monitor:$screen3, persistent:true
workspace=$ws_config, monitor:$screen2


# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more

# Example windowrule
# windowrulev = float,class:^(kitty)$,title:^(kitty)$

windowrule = suppressevent maximize, class:.* # You'll probably like this.

#Flameshot
windowrule=move 0 0,class:(flameshot),title:(flameshot)
#windowrule=pin, class:(flameshot),title:(flameshot)
#windowrule=fullscreenstate, class:(flameshot),title:(flameshot)
windowrule=float,class:^(flameshot)

#xwaylandvideobridge
windowrule = opacity 0.0 override, class:^(xwaylandvideobridge)$
windowrule = noanim, class:^(xwaylandvideobridge)$
windowrule = noinitialfocus, class:^(xwaylandvideobridge)$
windowrule = maxsize 1 1, class:^(xwaylandvideobridge)$
windowrule = noblur, class:^(xwaylandvideobridge)$

windowrule = workspace $ws_code, class:(code-oss)
windowrule = workspace $ws_file, class:(Pcmanfm)
windowrule = workspace $ws_steam, class:(Steam)
windowrule = workspace $ws_discord, class:(Discord)
windowrule = workspace $ws_discord, class:(vesktop)
windowrule = workspace 6, title:(Crack Viewer)
windowrule = workspace 6, class:(Launcher)
windowrule = workspace 6, class:^(SkateTracker)$

windowrule = workspace $ws_browser,class:^(ffwatcher)$
windowrule = workspace $ws_searcher,class:^(ffsearcher)$
windowrule = workspace $ws_homelab,class:^(ffhomelab)$
windowrule = workspace 5,class:^(Google-chrome)

windowrule = fullscreen,class:^steam_app\d+$

# floating windows
windowrule = float, class:(hyprland-share-picker)
windowrule = float, class:(Viewer)
windowrule = tile, title:(Crack Viewer)


# Allowing screen tearing
#windowrule = immediate, class:^(steam_app)

# Daemons
exec-once = /usr/bin/hyprpaper
exec-once = /usr/bin/playerctld
exec-once = /usr/bin/dunst
#exec-once = /usr/bin/sunshine
exec-once = /usr/bin/waybar
exec-once = /usr/bin/nextcloud
exec-once = /usr/bin/hypridle
#exec-once = ~/.config/hypr/sunset.sh

exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = /usr/bin/setleds +num < /dev/console # Turn on numlock
#exec-once = ~/.config/hypr/xdg.sh


#exec-once = [workspace $ws_code silent] kitty --session "~/.config/hypr/kitty/code1.sesh"
#exec-once = [workspace $ws_code silent] kitty --session "~/.config/hypr/kitty/code2.sesh"
exec-once = [workspace $ws_code silent] code --enable-features=WaylandLinuxDrmSyncobj
exec-once = [workspace $ws_monitoring silent] kitty -e "btop"
exec-once = [workspace $ws_monitoring silent] kitty -e "nvtop"
exec-once = [workspace $ws_file silent] kitty -e "yazi"
exec-once = [workspace $ws_music silent] /usr/bin/feishin --enable-features=UseOzonePlatform --enable-features=WaylandLinuxDrmSyncobj
exec-once = source ~/.config/hypr/ff.sh; start
exec-once = [workspace 5 silent] /usr/bin/google-chrome-stable --enable-features=UseOzonePlatform --enable-features=WaylandLinuxDrmSyncobj
#exec-once = [workspace $ws_discord silent] /usr/bin/discord --enable-features=UseOzonePlatform
exec-once = [workspace $ws_discord silent] /usr/bin/vesktop --enable-features=UseOzonePlatform --enable-features=WaylandLinuxDrmSyncobj
exec-once = [workspace $ws_steam silent] SDL_VIDEO_DRIVER=x11 SDL_VIDEODRIVER=x11 /usr/bin/steam
exec-once = [workspace $ws_obsidian silent] /usr/bin/obsidian --disable-gpu
exec-once = [workspace $ws_email silent] /usr/bin/thunderbird
exec-once = [workspace $ws_git silent] QT_QPA_PLATFORM=xcb /usr/bin/git-cola
#exec-once = [workspace $ws_ai silent] kitty --session "~/.config/hypr/kitty/ai1.sesh"

exec-once = [workspace $ws_ai silent] neovide -- --cmd "cd ~/Git_Repos/M85/REPOS/bridgecrackdetection/AI/"
exec-once = [workspace $ws_ai silent] kitty --session "~/.config/hypr/kitty/ai2.sesh"
#exec-once = [workspace $ws_config silent] kitty --session "~/.config/hypr/kitty/config.sesh"
exec-once = [workspace $ws_config silent] neovide ~/.config/hypr/hyprland.conf -- --cmd "cd ~/.config/hypr/"

bind = $mainMod, EQUAL, exec, ~/.config/hypr/keyboard_switch.sh
bind = $mainMod CTRL, l, exec, sudo /home/chris/.config/hypr/swap.sh
#bind = $mainMod, l, exec, ~/.config/hypr/lockin.sh
bind = $mainMod, k, exec, ~/.config/hypr/swallow.sh
bind = $mainMod CTRL, r, exec, /home/chris/.config/fish/functions/record

bind = $mainMod, c, exec, ~/.config/hypr/vpn.sh

exec-once = echo "/home/chris" > /tmp/whereami

